# 사물인터넷 2

---

<aside>
💡 키워드 중심으로(⭐ : 외우기)
어려운 프로토콜 → 수업 내용 중심으로 공부

</aside>

# 8. AIoT

## 경량 인공지능 관련 연구

### 경량 딥러닝 연구 동향

- **CNN** → 합성곱 연산에 대한 계산량과 메모리 관점에서 경량화, 고속화 필요
- **경량 알고리즘 연구**
    - 모델 구조 변경 : 잔여 블록, 병목 구조등 다양한 신규 계층 구조 이용하여 파라미터 축소 및 모델 성능을 개선하는 연구 (ResNet, DenseNet, SqueezeNet)
    - 합성곱 필터 변경 연구
    - 자동 모델 탐색 : 특정 요소(지연시간, 에너지 소모 등)가 주어진 경우, **강화 학습을(하고자 하는 일에 최적한 모델 자동 탐색해 만들어줌)** 통해 최적 모델을 자동 탐색하는 연구
- 알고리즘 경량화 연구 : 구조적 측면X, 기존 알고리즘 적절히 줄임
    - 모델 압축 : 가중치 가지치기, 양자화/이진화, 가중치 공유 기법 등 → 정확도 떨어지지만 모델 작아짐
    - 지식 증류 : 학습된 기본 모델 통해 새로운 모델 생성 시 파라미터값 활용해 학습시간 줄임.
    - 하드웨어 가속화
    - 모델 압축 자동 탐색

### 모델 구조 변경 기술

- ResNet (Residual Network)→ **신경망이 layer 개수가 늘어나면서, 정확도가 저하되는 문제 해결하기 위해 개발**, 잔차학습
    
    ![스크린샷 2023-12-15 오후 9.46.07.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-15_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.46.07.png)
    
- 파라미터 없이 바로 연결되는 구조 → Residue Add를 통해 성능을 개선함.
- 스퀴즈넷 → 기본적으로 사용하는 합성곱 3x3 필터를 1x1로 대체. → **채널 수 조정**
    - **다운 샘플링 전략**을 통해 한번에 필터가 볼 수 있는 영역을 좁히면서 **해당 이미지의 정보를 압축시킴.**

### 효율적인 합성곱 필터 기술

![스크린샷 2023-12-16 오전 1.17.24.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_1.17.24.png)

- **모바일넷은** 기존 합성곱 필터를 채널 단위로 가짐. → 채널별 처리 가능. Depthwise convolution은 연산량 줄일 수 있음
- **셔플넷에서는** 점별 합성곱(Pointwise convolution)을 수행하며, 특정 영역 채널에 대해서만 연산을 수행. → **연산량 줄임**

### 경량 모델 자동 탐색 기술

- **NetAdapt**는 주어진 **Budget**(해당 모델을 동작시키기 위한 자원, FLOPS)을 만족하는 최적의 결과를 얻기 위해, Budget을 여러 개로 나누어 이를 각각 만족하는 조건을 찾아 모델을 만들어 줌.

### MNasNet

- **엠나스넷**(MNasNet: Multi-objective Neural Architecture Search Network) → 성능 ↔ 비용 간 밸런스를 유지하는 최적의 네트워크 구조를 찾기 위해, **neural architecture search(NAS)**를 사용
    
    ![MNasNet : 보상을 만들어서 강화학습 모델을 보완함.](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_12.13.42.png)
    
    MNasNet : 보상을 만들어서 강화학습 모델을 보완함.
    
    - **MNasNet의 특성** : RL 기반의 NAS → 넓은 공간의 가능한 architecture를 검색하여, 주어진 모바일 플랫폼에 최적인 architecture를 제시. 소비전력, 메모리 등 요구
    - **MNasNet의 NAS 기술 장점**
        - **Automation** : 신경망 설계의 자동화
        - **Efficiency** : NAS는 수작업으로 만든 architecture보다 우수한 architecture를 찾을 수 있게 함.
        - **Accuracy** : 자원 제약성이 있는 경우에도 가급적 높은 정확도 실현 가능.

### Pruning

- **가중치(Weights) 가지치기** (Weight Pruning)
    - 작은 가중치 값은 모두 0으로 함
- **채널 가지치기**
    - 중요도가 떨어지는 채널을 제거함
        - ex) VGG-16에 적용시 정확도 1% 떨어뜨려 VGG-16을 **최대 70% 줄임**
    - **Channel Pruning Process**
        - DL model 학습
        - 작은 weight값 갖는 채널 제거, LASSO regression 기반 덜 중요한 채널 선택 등
        - weight를 0으로 만들어 덜 중요한 채널 제거
        - 정확도 위해 모델 조정

### 모델 압축 기술

![강화학습 기반 모델 압축 수행의 예시. Reward를 극대화하는 쪽으로 actor가 모델을 바꿈](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_12.59.42.png)

강화학습 기반 모델 압축 수행의 예시. Reward를 극대화하는 쪽으로 actor가 모델을 바꿈

- **이진화(Binary Quantization)** : 신경망의 크기 및 복잡성 줄임.
    - **주의**: 정밀도 감소 등
- **모델 압축(Model Compression) 기법** → 딥러닝 모델 경량화.
    - Weight Shaping(가중치 셰이핑)
    - Channel Pruning(채널 프루닝): 모델에서 사용되지 않는 채널을 제거해 모델의 크기 줄임
    - Weight Quantization(가중치 양자화) : 가중치를 부동 소수점 숫자에서 정수로 변환하여 모델의 크기와 컴퓨팅 요구 사항을 줄임
    - Activation Quantization(액티베이션 양자화)
- **RL 기반 모델 얍축 예시**
    - Actor: 수행할 압축 연산을 선택. 정확하고 효율적인 압축 모델을 생성하는 연산을 선택하도록 학습됨
    - Cirtic ; 압축된 모델을 평가(penalty or reward)하고 액터 모델에 보상신호 제공

### 지식 증류 기술

- 지식 증류는 **더 작거나 다른 아키텍처가 더 큰 모델로 표현되는 기능을 근사하도록 훈련되는 기계 학습 기술**이다. → 즉, 더 큰 모델의 성능 특성을 유지하며 더 작고 효율적 모델을 만듦.

### 연합학습 (federated learning)

**Federated Learning + BlockChain**

- **연합학습**은 **클라이언트 디바이스(ex.스마트폰)에 학습 모델을 분산하여 학습**시키고, **학습 결과를 중앙 서버로 모아 모델을 업데이트**하는 기법
- 개인정보 보호 특성 좋음 : 개인정보가 중앙 서버로 전송되지 않음
- 분산 학습 특성 :  중앙 서버의 부담 줄임
- 효율성 : 중앙 서버로 데이터 전송 시간 절약 가능

### 민주학습(Democratized learning)

- 분산 학습 시스템. 최대한 많은 사람들이 AI를 많이 접근할 수 있게 함
- 각 클라이언트가 독립적으로 학습
- 다수결의 원칙 가짐, 협력적 특성 가짐
    - **Plasitcity(가소성)** : 신경망이 새로운 데이터에 반응하여 가중치와 연결을 변경하고 적응하는 능력

### Tensorflow-Serving

- 프로덕션 환경에서 **머신 러닝 모델을 서빙하기 위한 소프트웨어 시스템**
- 사용자에게 머신 러닝 모델을 배포하고 서비스할 수 있는 유연하고 확장 가능한 방법 제공
- 모델 제공 방식
    - As a REST API
    - As a gRPC Service
    - As a custom client library
- **Tensorflow Lite** : 모바일 및 임베디드 기기에 Tensorflow를 사용할 수 있도록 한 Converter

### TPU(Tensor Processing Unit)

- 경량 인공지능 연산 가속 기술
- Google의 TPU는 CNN과 같은 심층 피드 포워드 신경망 실행 가능. 전이 학습 목적 ok
- 하드웨어로 **행렬곱, Activation, normalization, pooling 등의 연산을 지원**함. 곱셈연산 빠르고 행렬곱 고속 수행

# 9. 블록체인 개요 및 비트코인 개요

## 1. 블록체인 개요

### 1.1. 블록체인 개요

- **블록체인 어원**
    - **블록**(데이터, 거래원장)이 **체인**(chain)으로 계속 연결됨.
        
        ![스크린샷 2023-12-16 오전 1.31.18.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_1.31.18.png)
        
- **블록체인 정의**
    - **IBM** : 비지니스 네트워크 참여자들의 **자산(유/무형 자산) 을 스마트 컨트랙트(Smart Contract**: 상호간 신뢰가능하며 프로그래밍 가능한 형태. ← 블록체인으로 무결성 보장**) 기반으로 거래를 투명하게 공유하는 기술**
    - **Wikipedia** : 블록을 P2P 방식으로 생성된 체인 형태의 분산(탈중앙화) 데이터 저장 환경에 저장함. 저장된 블록은 임의 수정 및 변경이 불가능한 데이터 위변조 방지 기술
    - **한국은행** : 거래정보를 기록한 원장(ledger: 회계 장부)을 특정 기관의 중앙 서버가 아닌 P2P 네트워크에 분산하여 공동으로 기록하고 관리하는 기술 → public 블록체인 (금융 관점)
- **블록체인/분산원장의 장점**
    - 블록체인의 **탈중앙화와 위변조 방지/신뢰성, 확장성, 투명성, 신속성은 전 산업 분야**(기존 금융, 물류/유통, 제조, IoT, 자율주행자동차, 헬스케어 산업)를 **혁신적으로 변화시킴**
    - **블록체인과 데이터 보안을 위한 블록체인, 디지털 트윈, 사물인터넷 플랫폼은 디지털 생태계 조성의 핵심 기술**
    - **응용**
        - 금융권(해외지불결제, P2P 거래 등 핀테크)
        - 공유경제(차량, 숙박, 재화 공유 등)
        - 제조,유통
        - 공공 분야(기록 관리, 개인 인증)
        - 미래 산업(사물인터넷, 모바일 헬스 케어 등)
        
        | 구분 | 특징 | 내용 |
        | --- | --- | --- |
        | 장점 | 탈중앙화 | 중개기관 없이 참여자 간 직접거래(P2P) |
        |  | 보안성 | 참여자 다수가 거래 정보 공유(해킹 불가) |
        |  | 확장성(오픈소스) | 오픈소스 기반으로 구축/연결/확장 가능 |
        |  | 투명성 | 모든 거래 기록에 공개적으로 접근 가능 |
        |  | 신속성 | 거래의 승인 및 기록이 자동적으로 실행 |
- **블록체인의 역사**
    - 1990s: 분산 컴퓨팅 개념 (전자화폐 개념 이미 등장)
    - 2009: bitcoin 등장 및 블록체인 개념 등장
    - 2011: 암호화폐 등장
    - 2013: 스마트 컨트랙트 개념 등장
    - 2015: 컨소시엄형(허가형) 블록체인 서비스 등장 (외부에 오픈 X)
- ⭐**블록체인 기본 동작**⭐
    - **전송** 메시지 생성 → 네트워크에 전송 및 validate → 블록 생성 → 블록 승인
    
    ![블록체인 동작 과정](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.54.48.png)
    
    블록체인 동작 과정
    

### 1.2. 블록체인 관련 주요 용어

- **스마트 컨트랙트(Smart Contract)**
    
    ![스크린샷 2023-12-16 오후 3.58.11.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.58.11.png)
    
    - **블록체인 기반**으로 **금융거래, 부동산 계약, 공증 등 다양한 형태의 계약을 자동으로 체결하고 이행**하는 것 (블록체인 2.0)
    - ⭐**자동화(Autonomous)된 분산 프로그램**⭐
        - *자동화* *: 자신의 조건이 만족되면 정책에 의해 자율적인 판단을 함*
- **해쉬 함수(체인)**
    - 해쉬함수는 **임의의 길이 데이터를 고정된 어떤 값(해쉬값)으로 만드는 암호 함수**
        - 해쉬값(출력값)과 동일한 다른 입력값을 찾는 것은 매우 어려움
        - 해쉬 체인에 있는 특정 블록 데이터 수정시, 이후 해쉬 체인 값이 모두 바뀜 → **불법적 위변조 탐지되므로 변경 불가. 데이터 무결성에 문제 생김**
        
        ![스크린샷 2023-12-16 오후 4.02.23.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.02.23.png)
        

### 1.4. 블록체인 기반 서비스

- 블록체인 **적용 대상 서비스 분야** 선정시 고려할 점
    
    ![스크린샷 2023-12-16 오후 4.05.31.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.05.31.png)
    
- 블록체인은 **코인에서 서비스 산업으로 진화**한다.
    - 초기 개념 → 블록체인 1.0(트랜잭션) → 블록체인 2.0(컨트랙트) → 블록체인 3.0(서비스, 산업화)
    
    ![스크린샷 2023-12-16 오후 4.07.30.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.07.30.png)
    

## 2. Simple Blockchain 데모

### 2.1. 블록체인 원리 및 동작 데모

- **해시 데모**
    - SHA256 해시함수 데모 수행
    - SHA 256 해시 함수
        - **ASIC 구현이 용이함 → 비트코인에서 ASIC dominance 현상 초래**
            - 칩으로도 채굴을 못하게 하는 알고리즘을 만듦(SHA256 사용 X). → **이더리움 채굴기는 GPU 기반의 내부 메모리**를 사용
- **SHA 256 연산 데모**
- **블록 구성 데모**
    - 블록내용에 대해, 해시 조건을 만족하는 nonce 값 찾아내면 채굴 성공
- **블록간 체인 구성 데모**
    - 첫 번째 블록은 genesis 블록 (이전 해시값 0)
        - data에 대한 nonce 값으로부터 해시 조건(채굴 조건)을 만족했는지 알 수 있음
    - 두번째 블록은 첫 번째 블록 해시값을 내포함
- **Distributed blockchain**
    - 동일한 chained block이 여러 peer에 분산되어 있음
    - **Peer A와 Peer B는 동일한 valid & chained block을 공유**
- Transaction을 블록 데이터로 가질 경우
- **초기 보유 coin 양을 확인할 수 있는 경우**
    - 앤더스(Anders)의 초기 coin양을 설정할 수 있음

## 3. 블록체인 암호 기초

### 3.1. 해시함수 개념 및 SHA 256 해시함수

- 해시함수란 ?
    - 임의의 길이의 데이터를 입력 받아, 고정된 길이의 특징값을 출력하는 함수
    - 메시지 다이제스트(message digest)
    - 암호키 없음
    - **일방향함수** : **입력값으로부터 해쉬값을 계산하는 것은 쉽지만** 해쉬값으로부터 그것을 출력하는 입력값을 찾는 것은 어려움
- 작업 증명과 해시함수
    - 작업 증명: 특정 작업을 수행하는 것을 통해 블록을 생성하고, 이를 인증하는 과정
- **해시함수**는 거의 대부분의 **Blockchain의 작업증명(**⭐PoW: **Proof of Work**⭐**)**에서 사용되고 있음
    
    ![스크린샷 2023-12-16 오후 4.38.25.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.38.25.png)
    

## 4. Bitcoin 개요

### 4.1. Bitcoin 개요

- ⭐**Bitcoin이란?**⭐
    
    ![스크린샷 2023-12-16 오후 4.43.24.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.43.24.png)
    
    - A peer-to-peer electronic caash system (분산된 전자 화폐 시스템)
    - **중앙집중화된 시스템 없음.**
    - 해시함수 이용한 작업 증명 기법 사용
    - **Electronic coin** : A chain of digital signatures.
    - Bitcoin does not depend on any **central authority.**(어떤 중앙 당국에도 의존하지 않는다)
    - Bitcoin protocol → open software에서 실행
    - **Public Ledger**(공공 원장에 의존) : "블록체인"이라고 불리는 모든 거래의 부패할 수 없는 공개 데이터베이스이다.
    - Anyone can write in the blockchain.
    - Anyone can have a copy of the blockchain.
    - The blockchain is composed by a **chronological** sequence of cryptological chained blocks.
        - **chronological :** 연대순으로 - 시간적 측면. 암호학적 블록 연결이 시간의 중요성(순서가 중요함)을 갖는다.
    - 약 10분마다 하나의 블럭이 생성됨.
    - 블록은 현재 거래를 검증하는 “miners”에 의해 생성됨

### 4.2. ⭐Bitcoin 동작 개요도⭐

![Grokking Bitcoin by Kalle Rosenbaum](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.01.13.png)

Grokking Bitcoin by Kalle Rosenbaum

1. **Transactions**
    
    ![스크린샷 2023-12-16 오후 5.07.19.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.07.19.png)
    
    - Alice는 network에게 1 bitcoin을 Bob에게 전송 요청함
    - 이를 위해, Alice는 우선 Tx을 Bitcoin network에 보내야 하는데, 해당 Tx은 “돈”을 어떻게 이동시킬지에 대한 instruction + Alice가 이를 요청하는 것이라는 것을 서명해야 함.
    - **Tx의 구성**
        - The amount of move (1 bitcoin)
        - Bob의 Bitcoin 주소
        - Digital 서명값 (Alice의 Private Key로 서명 생성)
2. **The Bitcoin Network**
    
    ![스크린샷 2023-12-16 오후 5.15.21.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.15.21.png)
    
    - Alice는 하나 혹은 여러 개의 Bitcoin node에 해당 Transaction을 보냄
    - Tx을 수신한 각 node는 Tx이 유효하다는 것을 검증한 후, 자신의 peers들에게 보냄 (neighbor nodes에게 뿌림)
        - **검증** → Alice가 spend하고자 하는 bitcoin을 Alice가 보유하고 있는지, Alice의 디지털 서명이 맞는지 (invalid Tx는 Bitcoin networks의 첫번째 node에서 drop)
        - **Relaying** → 위의 검증이 완료 → Tx는 peers에게 전송
        - Alice의 Tx는 조만간 networks 전체로 확산
3. **The Blockchain**
    
    ![스크린샷 2023-12-16 오후 5.21.02.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.21.02.png)
    
    - 각 노드에서 보면 여러 Tx를 수신하게 되고, 수신된 Tx들은 당연히 서로 다른 순서로 오게 됨
    
    ![스크린샷 2023-12-16 오후 5.21.21.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.21.21.png)
    
    - 만약 같은 순서로 Tx가 오게 되면 둘 모두 연결함. 이후 길이 차이가 나면 긴 놈이 이기고 짧은 길이는 드랍되는 대신 약간의 보상을 얻음.
    - 해당 순서를 통일시키는 방법은?
        - **mining(채굴)** 과정에서 어떤 하나의 노드(ledger)에 의해 Tx들은 ordering됨. 이러한 ledger를 선정하는 과정이 채굴 과정.
        - Ledger가 보내는 블록을 사용하여 network의 모든 노드들이 이를 update함.
4. **Wallets**
    - Bob과 Alice는 모두 Bitcoid network 사용자 → 둘 다 네트워크와 상호작용하려면 컴퓨터 프로그램이 필요 : **비트코인 지갑**
    
    ![스크린샷 2023-12-16 오후 5.23.45.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.23.45.png)
    
    - ***Alice와 Bob의 지갑***
        - 현재 모든 network의 모든 node들이 block을 update함
        - 이 때 network는 Alice와 Bob에게 “Alice가 Bob에게 보낸 Tx이 잘 전송되었다”라는 것을 notify 해야 함
        - Bob의 지갑은 Bitcoin 네트워크의 일부 노드에 연결. 이에 Bob에 대한 트랜잭션이 블록체인에 추가되면, Bob의 지갑이 연결된 노드가 Bob의 지갑에 알림
        - 지갑은 Bob에게 1bitcoin을 받았다는 메시지를 표시
        - Alice도 지갑을 사용하므로, Alice도 해당 Tx에 대한 알림을 받음
        - Tx를 보내고 받는 것 외에도 Bob과 Alice의 지갑은 개인 키(Private Key: 디지털 서명을 생성, 비트코인 주소를 생성)도 관리.
        - Alice는 자신의 Private Key중 하나로 디지털 서명 만듦.
        - Bob도 자신의 Private Key로 생성한 Bitcoin address로 받은 돈은 사용하려면 트랜잭션을 생성하고 자신의 개인 키(Private Key)로 디지털 서명을 해야 함.
        

# 10. IoT 보안과 블록체인

## 1. 블록체인 개요

### 1.1. 블록체인 개요

- **P2P 기술**. **중앙집중적 권한을 가진 제 3자가 없는 분산형 네트워크,**
- 트랜잭션과 데이터, 명령어가 블록에 구성. → **블록은 해시 체인으로 구성.(블록의 연결체 집합)**
- **트랜잭션 사례**
    - 앨리스가 밥에게 돈을 보냄
    - 스마트 컨트랙트 명령어 전송 (이더리움)
    - 스마트 트랙트에서 필요한 데이터 전송 (이더리움)

### 1.2. 블록체인과 Web 3.0

- ⭐**웹의 역사**⭐
    - **정보 소비형 웹(Web 1.0)**에서 **사용자 참여형(Web 2.0)**으로 진화. 현재는 **탈중앙화되면서 사용자의 소유권과 프라이버시를 보호하는 Web 3.0으로 진화중**
    - ⭐**Web 1.0 : 정보 경제 (Information Economy)**⭐
        
        ![스크린샷 2023-12-16 오후 5.48.01.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.48.01.png)
        
        - 야후, 구글, 웹 브라우저 등
        - 콘텐츠(정보) 배포 네트워크
        - 사용자는 정보 소비 중심
        - 읽기 중심
    - ⭐**Web 2.0 : 플랫폼 경제 (Platform Economy)**⭐
        
        ![스크린샷 2023-12-16 오후 5.48.18.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.48.18.png)
        
        - facebook, 트위터, Youtube, Medium 등
        - 사용자 참여형.
        - 중앙집중형 데이터
        - 개인 프라이버시 침해 이슈 증가. ⭐**자기정보 통제권 상실**⭐
        - 읽기/쓰기 중심
    - ⭐**Web 3.0 : 3세대 인터넷 (가치의 인터넷 : Internet of value, 토큰 경제 : Token Economy)**⭐
        
        ![스크린샷 2023-12-16 오후 5.48.27.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.48.27.png)
        
        - 정보교환 중심의 인터넷에서 가치 교환의 인터넷으로 전환
        - 블록체인, 인공지능, IoT, 메타버스 등 혁신기술의 연합체
        - 프라이버시가 유지되면서 사용자 친화적이며, ⭐**자기정보통제권 확대**⭐
        - 읽기/쓰기/실행 가능
- **Web 2.0의 주요 특성**
    - 항상 연결된 고객 시장, **플랫폼으로서의 웹(Web as Platform)이 실현됨**
    - Youtube, 팟캐스팅, 블로그, 페이스북 등 **사용자는 콘텐츠 생산자이자 소비자**가 되며, 사용자의 생각과 경험이 공유되는 서비스로 발전
- **Web 3.0의 주요 특성 (핵심 : Blockchain과 AI)**
    - **데이터와 디지털 life**에 대한 **투명성**(데이터 상태 추적)**, 접근성, 자율성, 데이터 및 가치 제어권한, 탈중앙성, 불변성을 제공하는 Human-centric 기술**
    - **Internet of value** : 블록체인을 통해, 데이터와 정보에 대한 가치를 개인이 통제하고 교환하며 거래할 수 있음
    - **Semantic Web** : AI를 통해, 데이터를 맥락적, 개념적으로 연결 및 이해하여 데이터간 풍부한 연결성과 표현력을 갖게 됨
    - **블록체인의 불변성과 투명성, 자율성, 탈중앙성**을 통해, Web 3.0 서비스는 기존과 다른 가치 제공
        
        ![[https://blog.coinbase.com/understanding-web-3-a-user-controlled-internet-a39c21cf83f3](https://blog.coinbase.com/understanding-web-3-a-user-controlled-internet-a39c21cf83f3)](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.59.05.png)
        
        [https://blog.coinbase.com/understanding-web-3-a-user-controlled-internet-a39c21cf83f3](https://blog.coinbase.com/understanding-web-3-a-user-controlled-internet-a39c21cf83f3)
        
        - **State 계층** : **불변성, 투명성** 제공. Data에 대한 World State 제공. 원천적 블록체인 기술
        - **Computation 계층** (ex) **Turing complete 수준의 Smart Contract** 제공 → CPU에서 돌아가는 로직 구현 간단히 가능함)
        - **Component 계층** : Token, NFT, 식별체계, 보안 등 블록체인 생태계 주요 요소 제공
        - **프로토콜 계층** : 다양한 프로토콜 제공 (서비스 프로토콜)
        - **Scalability, 전송 계층** : 기술적으로 빠른 블록체인 기술을 가능하게 함. 보안성과 확장성을 동시 제공함. (고속 TPS, L2 프로토콜 등)
        - **사용자 제어 계층** (사용성 증대) : User Experience를 높임. 데이터 및 지식에 대한 사용자 제어 수단 제공
        - **응용 서비스 계층** (다양한 서비스 실현) : AI와 접목시 유용함. 현재는 속도 등의 이슈로 사용성은 크지 않음.

### 1.3. World State 제공의 의미

- **기존 Web 기술의 문제점**
    - **Web 1.0, Web 2.0** ⇒ web/인터넷에서는 사용자는 운영자를 무조건 신뢰할 수 밖에 없는 상황. 운영자와 분리된 형태의 “state” 정보가 없음
    - 이러한 “state”를 transfer하는 수단도 부족함
        - Google, Facebook 등 글로벌 거대 기업은 “사용자의 상태”를 유지하기 위해 여러 수단 제공 → **하지만, 이는 거대 기업의 중앙 집중화 현상을 가속화하고 정보 및 부의 집중화 초래함.**
    - Web 3.0 → “상태 정보”를 통해, 데이터와 정보의 불변성과 신뢰성, 추적성을 제공하면서 개인의 프라이버시와 재간권 보호, 개인에게 자기 정보 통제권을 제공하는 수단이 필요함
- **Web 3.0의 불변성, 투명성, 추적성 제공의 원천** → “World 상태” 제공, **Hash Tree 기술** (hash 값 형태로 검증되는 구조)
    
    ![ACM Computing Surveys, 53(3):1—43, 2020, “A Survey on Ethereum Systems Security”](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.48.34.png)
    
    ACM Computing Surveys, 53(3):1—43, 2020, “A Survey on Ethereum Systems Security”
    
    - Ethereum에서 제공 (상태Tree, CodeHash, Storage Tree)
    - **Stateroot(상태 루트), TransactionRoot, ReceiptRoot의 중요성**
        - **데이터 무결성 제공**
            - 위 세개의 Merkle root 구조는 각각의 무결성을 제공함
            - 기본 데이터 조작 시도시, 해시값 불일치 발생 → 검증자에게 변조 사실 제공
        - **효율적인 검증 제공**
            - **Merkle root 구조를 사용**하면, 전체 블록 다운로드할 필요 없이 개발 데이터 요소를 효율적으로 검증 가능
        - **데이터 가용성 제공**
            - Merkle root 구조는 효율적인 데이터 검색 및 검증 가능
            - 특정 계정의 잔액이나 거래 세부 정보 같은 특정 데이터요소 요청 가능
- ⭐**머클 트리(Merkle Tree)** ⭐기반 효율적 존재증명/포함증명(inclusion proof)
    
    ![스크린샷 2023-12-16 오후 7.30.01.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.30.01.png)
    
    - Ex) $H_k$ 데이터에 대한 존재 증명 (혹은 무결성 증명)을 위해 파란색 데이터(해시값)만 있으면 됨.
        - 즉, $H_L$, $H_{IJ}$, $H_{MNOP}$ 및 $H_{ABCDEFGH}$가 있으면 $H_K$ 데이터 존재 증명 혹은 무결성 증명이 가능.

### 1.4. 가치의 인터넷 제공자로서의 블록체인

- Web 3.0을 통한 “가치의 인터넷(Internet of Value)” 실현
    - **블록체인을 통해**
        - 디지털 자산에 가치를 부여하고
        - 자산의 가치를 교환하는 방식을 제공함
    - Web 2에서의 데이터
        - 텍스트, 이미지, 비디오, 음악, 거래정보 등
    - Web 3에서의 데이터
        - 무형자산 : 암호화폐, 주식, 저작권, 소유권, 특허 등
        - 유형자산 : 부동산, 상품, 그림작품 등
        - Obligations : 스마트컨트랙트, 규정 등

### 1.5. 블록체인의 특성 - 다양한 기술의 융합체

- 블록체인에는 다양한 IT 기술이 사용됨 (IoT 분야와 유사)
    - 분산 시스템
    - 암호학
    - 네트워킹
    - 데이터베이스
    - 플랫폼 기술

### 1.6. 블록체인 응용서비스 : 블록체인의 기본 가정

- 현재의 IT 서비스는 대부분 사전에 신뢰할 수 있는 엔티티와 상호 협력한다는 것을 가정하지만, **실제로는 보안 취약성과 외부 공격으로 인해 신뢰할 수 없는 엔티티와 상호 협력을 하고 있음.**
    
    ⇒ ⭐**블록체인은 신뢰할 수 없는 장치의 존재를 가정함 (Byzantine Generals Problem, 비잔틴 장군 문제 → 공격형 노드로 변신 가능)** ⭐: 프로토콜은 따르지만, 어느 시점에 신뢰할 수 없는 행동을 하는 것들. 
    
- 응용
    - 금융 → 암호화폐 , 소액결제, 크라우드 펀딩
    - 공공 기록 → 차량 등록, 토지 등록
    - 개인 기록 → 대체 불가능 토큰 (NFT : Non-Fungible Token, 예술, 음악, 비디오, 게임 아이템 등)
    - 크라우드소싱 → Peer-to-peer (P2P) 대출, 배송

### 1.7. 블록체인 확장성 문제

- **블록체인에서의 scalability**는 throughput, latency, bootstrap time, cost per transaction 등의 다양한 범위
- 비트코인은 약 7 TPS로 기존 Visa 약 4000 TPS에 비해 현저히 떨어지는 성능을 가짐. 외에도 이더리움 등 많은 블록체인이 성능 문제 갖고 있음
- ⭐**블록체인의 Trilemma 문제 (three dilemma. 3개의 딜레마 존재)**⭐
    
    ![Trilemma problem](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.47.04.png)
    
    Trilemma problem
    

### 1.8. 블록체인 고속화 기법 - Layer 1

- **성능 향상을 위해** 합의 알고리즘, 블록의 크기, DAG, Sharding 개선 연구
    - **성능 향상** - 이더리움 2.0 (합의알고리즘(PoW→ PoS) 전환 및 Sharding 도임, 블록 사이즈 조정
    - **Sharding** - **대용량 데이터 처리를 위한 분할 저장 방식**으로, 각 사드의 분할 검증을 통한 확장성 향상 (빠른 검증과 빠른 리딩을 처리 → 하나의 네트워크 형태로 구현)
    - **Consensus** - PoW의 높은 연산 요구량을 극복하기 위해 여러 합의 알고리즘 연구
    - **DAG** - **DAG(Directed Acyclic Graph)**는 블록체인과 별개의 구조를 가진 분산 시스템으로 **IOTA**, **Hedera** 등
        - IOTA의 DAG
            - 체인이 그물처럼 만들어져 한 번에 여러 개의 블록이 만들어지는 만큼 빠름
        - Hedera → HashGraph
    - Block size - 블록 사이즈를 키워 한 블록에 많은 transaction 저장, 높은 블록사이즈는 블록 **전파간의 지연시간, 탈중앙성 훼손 등의 문제** 존재

### 1.9. 블록체인 고속화 기법 - Layer 2

- **Payment Channel** - Payment Channel을 생성해 지불 과정 수행 후 결과만 Later 1 저장
- **Plasma** - Unlimited Tree Plasma Chain에서 처리한 트랙잭션의 머클 루트를 Layer 1에 저장
- **Rollup** - Plasma의 머클 루트에 압축된 트랜잭션 배치를 추가하여 전송

## 2. IoT 보안을 위한 블록체인

### 2.1. IoT 식별 수단으로서의 블록체인 - ⭐DID⭐

- **블록체인을 식별 체계로 활용**
    - 각 조직별로 자신의 정보를 외부에 공개하지 않으면서도 글로벌 식별체계 제공 가능
        - 타국에서도 인증 가능한 DID → 내 개인정보 줄 필요X. 개인정보가 전자지갑을 벗어나지 않게 함
        - 주민등록증의 단점 : privacy, 추적성. 생체정보(Bio)와 연관되어 있기 때문에 한번 오픈되면 ID 바꿀수도 있음.
    - 블록체인 기반의 식별체계를 사용해 보안 및 유지보수 용이
    
    ![DID를 통한 식별](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.38.51.png)
    
    DID를 통한 식별
    
- **DID 기반 신원증명 서비스** 사례 : **부산 B-Pass**
    - 부산 블록체인 규제자유특구 사업에서 개발한 **탈중앙 신원증명(DID) 기술 및 이를 사용하는 B-Pass 앱**
    - 부산 교통카드, 부산시민카드, 해운대 구민카드, 부산시청 방문증, CENTAP 출입증, 모바일 가족사랑카드 등 다양한 공공분야에서 사용됨

### 2.2. IoT 디바이스 인증 - X.509 인증서 관리

- **블록체인을 기반으로 X.509 인증서 관리**
    
    ![스크린샷 2023-12-16 오후 8.46.40.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.46.40.png)
    
    - Extension 부분에 대한 속성 관리 (권한 관리 등)
        - 속성 → 해당 인증서에 대한 속성, 조건 등 관리 가능
    - 인증서 발급 상황 관리
    - 인증서를 브라우저에 저장하는 대신 블록체인 네트워크에서 관리함.
- **CertLedger**
    
    ![Kubilay, M. Y., Kiraz, M. S., & Mantar, H. A. (2019). CertLedger: A new PKI model with Certific ate Transparency based on blockchain. . Computers & Security, 85, 333-352.](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.49.28.png)
    
    Kubilay, M. Y., Kiraz, M. S., & Mantar, H. A. (2019). CertLedger: A new PKI model with Certific ate Transparency based on blockchain. . Computers & Security, 85, 333-352.
    
    - TLS 인증서 저장 및 관리 기능 제공
    - 블록체인에서 인증기관(CA) 인증서를 관리하기 위한 PKI 아키텍처

### 2.3. 인증서 폐기 관리를 위한 블록체인

- 블록체인 기반 X.509 **CRL(Certificate Revocation List) 관리**
    - **인증서 폐기 목록을 중앙화 된 관리가 아닌, 블록체인 기반 관리를 통해 효율적 관리 가능**
    - CRL 메타데이터 정보를 블록체인 내에서 관리, 개인정보 활용 내역 및 범위 추적 가능
    - CRL log의 무결성 보장
    - CRL query 속도 증가
    - 활용 수준에 대한 실시간 추적 가능
    
    ![스크린샷 2023-12-16 오후 8.53.59.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.53.59.png)
    
    ![Medury et al. SCRaaPS: X.509 Certificate Revocation Using the Blockchain-based Scrybe Secure Provenance System](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.54.14.png)
    
    Medury et al. SCRaaPS: X.509 Certificate Revocation Using the Blockchain-based Scrybe Secure Provenance System
    
- **OCSP(Online Certificate Status Protocol)**
    - 인증서가 폐기된 것인지 아닌지를 PC/브라우저에서 자체 확인. 그를 확인하는 프로토콜을 말함

### 2.4. DNS 보안 관리를 위한 블록체인

- 블록체인 기반 **DNS(Domain Name System)** 관리
    - 도메인 검열 저항 및 누구나 도메인 등록 가능
    - 제 3자에 의한 도메인 이름 도용 및 탈취 방지
    - 등록된 도메인에 대한 판매 등이 가능함
        
        ![도메인 이전](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.59.12.png)
        
        도메인 이전
        
- Ethereum DNS 서비스(.eth)
    - **ENS의 주요 장점**
        - **DNS처럼 Single Point of Failure가 존재하지 않음**
            - 남한테 뺏길 가능성 0
        - Domain 조작 우려 X

### 2.5. Data Storage Integrity 보장 수단

- **IoT 보안 → 기술 + 관리**
- **기존 DB에 저장된 데이터에 대한 무결성 제공, 암호화 관리 가능**
    - DB 데이터에 대한 해시 트리 처리를 통한 DB 무결성 제공
    - 저장된 데이터 인증, 접근 허가 등 블록체인에서 관리
        - 보안관리, 접근제어 관리, 활용현황 관리 등
    - 추적 가능하도록 활동 기록 제공
    - ⭐**DB가 암호화될 경우, 가장 어려운 이슈인 키 관리를 효율적으로 수행할 수 있음.**⭐

### 2.6. 개인 민감 정보 관리 수단으로서의 블록체인

- 블록체인 기반 **EHR 관리**(Electronic Health Records → medical data. 진단 기록 등의 고급 정보)
    - 인증, 데이터 검색, 기존 기록의 업데이트 추적, 데이터 ㅣㅂ력 및 데이터 공유 관리
- **GDPR**을 준수하는 블록체인 기술
    - ⭐**GDPR : General Data Protection Regulation**⭐
    - 유럽 일반 개인정보 보호법(GDPR) 준수를 위해 데**이터 삭제, 익명화 등 기능 제공 필요.** → 블록체인 기반으로 증명

### 2.7. IoT SW 버전 및 패치 관리 수단

- **블록체인을 사용하여 보안성을 유지하며 IoT 환경에 대한 S/W 패치 관리 가능**
    - **무결성**을 높이기 위해 바이너리 파일을 블록체인에 기록
    - **전송 노드 간 협업**을 통해 신뢰할 수 있는 P2P S/W 업데이트 제공
    - 신뢰할 수 있는 참가자 → 보상으로 토큰 지급
- 중앙 서버로부터 펌웨어를 다운로드 하는 대신, **각 디바이스는 P2P 방식으로 전송 노드로부터 업데이트를 받음.**
    - 기존에는 중앙서버로부터 SW 패치를 받았는데, 여기서는 어떤 전송노드(에지장치, G/W, 디바이스 노드)로부터 패치를 받음.
- **새로운 펌웨어는 배포 전, 바이러스가 없음이 확인됨(using VirusTotal Interface)**
    - 바이러스 검사 결과와 펌웨어의 해시값이 블록체인에 게시
    - 디바이스는 설치/패치 전에 첨웨어 무결성 및 품질을 확인할 수 있음.
    - **전송 노드(Transmission node)가 펌웨어 배포자**
- **최신 S/W 개발 라이프사이클에서는 개발자가 이미지를 공유하도록 권장하는 경우가 많음.**
    - 이로 인해 악성 이미지가 매우 쉽게 확산
- **Docker 이미지 검증은 Notary 서버를 통해 중앙에서 수행**
    - 이로 인해 단일 장애 지점(single point of failure)이 발생하고 검증 프로세스가 완전히 투명하지 않음.
- **블록체인을** 사용하여 Docker image 업데이트를 보호할 수 있음 (CVE, 바이러스, malware 탐지)
    - 이미지 검증 결과는 블록체인을 통해 공유
    - 개발자는 악성 여부 확인 가능

### 2.8. Secure BGP를 위한 블록체인

- **블록체인 기반 BGP(Border Gateway Protocol) 라우팅 프로토콜 관리**
    - **BGP :**  인터넷에서 **자율 시스템(AS) 간에 라우팅 및 도달 가능성 정보를 교환하도록 설계된 표준화된 외부 게이트웨이 프로토콜**
    - Perer간 통신에 사용되는 메시지에 무결성, 상호 인증 등을 지원하지 않으며 메시지 삽입, 삭제, 변경 등의 보안 위협 요소가 존재
    - BGP 메시지를 블록체인 원장 내에 기록하여 데이터의 무결성을 유지 및 안정성 향상
- **2021년 부산 네트워크 장애 사례**
    - 프로토콜 종료하는 exit 명령어 누락이 원인 → 관리 이슈, 블록체인으로 해결 가능

### 2.9. Docker 이미지 보안을 위한 블록체인

- 최근 IoT 서비스 개발에 Docker/Container 기술 많이 사용
    - 기존 Docker/Container 보안 기술 → isolation
    - Docker의 과거 보안 취약점
        - CVE-2018-8115 : **Jack-in-the-Box 취약점**
- Docker/Container image 무결성 보장 기술
    - 이미지에 대한 서명값 생성과 사용 전에 검증 수행(Signed image)
- **제안시스템**
    
    ![스크린샷 2023-12-16 오후 9.36.26.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.36.26.png)
    
    - publish된 **이미지의 quantity와 integrity를 보장**해야 함. 3개의 모듈로 구성됨
        - **Inspection Center 모듈**
        - **Updater/Patcher 모듈**
        - **Integrity Checker 모듈**
    - 각 이미지에 대해 **Image Profile** 의 메타데이터 생성 (보안 보장, 블록체인에 저장)
- **Push Workflow**
    1. 개발자는 새 이미지를 생성
    2. 검사센터 (inspection center) 모듈에서, 이미지 유효성 검사를 실행하고, 검사센터에서 보안점수, CVE(Common Vulnerabilities and Exposures) 목록, 위반 목록을 가져옴
    3. 이미지 해시값을 계산함
    4. 이미지 프로파일을 생성함
        - publicher blockchain 주소, container 이미지 해시값, CVE 목록, 위반 목록, 보안 점수 등
    5. 배포 등의 과정
    - **무결성 체크 모듈** → publich된 이미지, 다운로드한 이미지의 무결성을 보장하는 블록
- **분석 결과, 최종 보안성 침해로 결론나는 경우**
    
    ![스크린샷 2023-12-16 오후 9.52.42.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.52.42.png)
    
    - Intolerable :
        - If Virus/Malwares are detected, the image is rejected (Line 2)
        - If CVE exceeds 9, the image is rejected (Line 9)
        - If Violation is FATAL (Level 4), the image is rejected (Line 21)
- **분석 결과, 허용 가능한 수준인 경우**
    - Tolerable

# 12. IoT - CPS 기술 및 시스템 사례

## 1. 산업 제어 시스템과 보안

### 1.1. 산업 제어 시스템 개요

- 산업 제어 시스템(ICS: Industrial Control System)
    - **SCADA**(Supervisory Control And Data Acquisition: 외부로부터 정보 센싱), **PCS**(Process Control Systems), **DCS**(Distributed Control Systems), **Automation**, **PLC**(Programmable Logic Controller) 등 다양한 통신 프로토콜, OS, 응용 기술로 구성
    - 발전소, 전력망, 철도, 정유공장, 공장 자동화 등 다양한 응요 환경에서 사용됨
- **ICS**(CPS의 대표적 예)는 다음과 같은 요소를 가짐
    - **통신 프로토콜** : ICS는 서로 다른 구성 요소 간에 데이터를 전송하기 위해 다양한 통신 프로토콜을 사용함. Modbus, Ethernet/IP, **OPC UA** 등이 있음
    - **운영 체제** : ICS는 운영체제를 사용하여 하드웨어 및  소프트웨어 리소스를 관리함. 일반적으로 사용되는 운영 체제는 **실제로 거의 없데이트 안 함.**
    - **응용 기술** : ICS는 공정 제어, 데이터 수집 및 분석, 보안 등 다양한 응용 기술을 사용하여 제어 공정을 수행함
- ICS는 사물인터넷, 인공지능, 클라우드 컴퓨팅 기술의 발전으로 더욱 지능화 및 확장될 예정
- ICS에 인공지능(AI)이 사용된 사례(I**ndustrial Control System의 주요 목적 : 고장이 언제쯤 날지, 이상 징후를 감지한다**. 부품 교환 일정 예측 등)
    - **발전소** : 발전소의 발전기, 터빈, 변압기 등의 상태를 AI로 분석하여 이상 징후 감지
    - **전력망** : 전력망의 전압, 주파수 차단 등을 AI로 분석해 전력망의 안정성을 향상. 발전소 출력 조절 등
    - **철도** : 열차의 위치, 속도, 방향 등을 AI로 분석해 열차의 안전 운행을 지원
    - **정유공장** : 석유 원유를 정제해 휘발유, 경유, LPG 등을 생산하는 공정을 AI로 최적화하여 생산 효율성을 향상
    - **공장 자동화** : 공장의 생산 공정을 AI로 자동화하여 생산 효율성을 높이고 품질을 향상시킴
- **ICS와 인공지능의 결합의 사용 목적**
    - **공정 데이터의 분석** : 공정 데이터를 AI로 분석하여 공정의 이상 징후를 감지하고, 공정의 효율성을 향상시킴
    - **공정의 제어** : AI를 사용하여 공정을 자율적으로 제어해 공정의 안전과 효율성 향상
    - **공정의 보안** : AI를 사용해 공정에 대한 사이버 공격을 탐지하고 이를 방어
- **SCADA(Supervisory Control and Data Acquisition)**
    
    ![전력 송배전 시스템의 부하상황 모니터링을 하는 SCADA system](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_10.23.15.png)
    
    전력 송배전 시스템의 부하상황 모니터링을 하는 SCADA system
    
    - 산업 공정이나 인프라, 생산설비, 공정을 모니터링하고 제어하는 시스템
    - 원격, 분산된 자산을 감시 및 제어
    - 전력 생산 및 분배, 댐 운영, 가스 생산 및 유통, 수자원 관리 및 원자력 발전 설비 운영을 제어하고 관리하는 시스템
- **DCS(Distributed Control System)**
    - 분산 제어 시스템(DCS) : 산업 공정 제어에 사용되는 컴퓨터화된 제어 시스템
    - **구성 요소**
        - **필드 장치** : 공정 변수 측정 및 제어
        - **컨트롤러** : 수집한 데이터를 사용해 공정 제어
        - **운영 스테이션** : 운영자가 공정을 모니터링 및 제어하는 데 사용되는 장치
- ⭐**산업 제어 시스템의 주요 특성**⭐
    - 비표준화된 proprietary 기술 사용
        - 표준화된 통신 프로토콜 → Modbus, Ethernet/IP, PROFINET, DeviceNet, ControlNet
        - 업체에서 만든 proprietary 프로토콜(비표준화 프로토콜) → Allen-Bradley의 ControlNet, Rockwell Automation의 DeviceNet, ABB의 PROFINET 등
    - 오랜 기간동안 사용
    - 초기 단계에서 보안을 고려하지 않고 개발됨. 또한 기존 것을 업그레이드 할 엄두 안 남.
    - 산업 제어 시스템 → 실시간 OS 사용
    - 운영 체제 : 산업 제어 시스템은 일반적으로 **실시간 운영 체제(RTOS)를 사용**함 (가장 중요) → 제어 업체에서 자체 개발한 비표준화 운영체제도 많음.

### 1.2. 산업 제어 시스템과 인터넷 연결

- 전통적 제어 시스템 통신 기술 + IP 네트워크 -> 보안 취약성 증대
    - 네트워크가 다양해지면서 Attack Surface가 굉장히 커짐
- 각종 공격 유형
    - Inability to limit access
    - Passwords sent in clear text
    - Unprotected firmware

### 1.3. 산업 제어 시스템 공격 사례

- **제어 시스템 공격 사례**
    - 유럽전력회사 통신 네트워크에 대한 SFG malware 공격 (2016.6)
    - 이란 해커의 미국 Bowman Avenue 댐 제어시스템에 대한 공격 (2013)
    - BlackEnergy 악성코드에 의한 우크라이나 전력망 공격 (2015.12)
- **항만 시스템에 대한 공격 사례**
    
    ![[https://www.assetnote.io/resources/research/citrix-bleed-leaking-session-tokens-with-cve-2023-4966](https://www.assetnote.io/resources/research/citrix-bleed-leaking-session-tokens-with-cve-2023-4966)](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_10.40.03.png)
    
    [https://www.assetnote.io/resources/research/citrix-bleed-leaking-session-tokens-with-cve-2023-4966](https://www.assetnote.io/resources/research/citrix-bleed-leaking-session-tokens-with-cve-2023-4966)
    
    - **공격 대상 : DP World Australia**
        - **DP World Australia는 호주의 컨테이너 물동량 40% 담당하는 호주 최대 항만 웅영업체**
    - 공격 후 복구 소요 시간 → 약 3일
        - 백업 데이터를 이용하여 시스템 복구 진행
    - 피해 : 4개 터미널 육상 운송 마비
    - DP World 사이버보안 공격 및 대응
        - NetScaler ADC/Gateway에서 취약점(Citrix Bleed) 공개 후 Citrix사에서 NetScaler ADC/Gateway 보안 패치 배포했지만, **DP World에서는 Citrix Bleed 보안 패치 X. (리스크가 커서)→ root 권한을 얻어 랜섬웨어 공격 받음.**
        - 공격 대응 위해 외부 네트워크 연결 차단으로 육상물류 인프라 마비
    - Citrix Bleed 취약점 : 버퍼 오버플로우 최약점, ADC/Gateway 메모리 상에 존재하는 **보안 자격증명 데이터 유출**
- **태양광, 풍력 발전 보안 침해 사례**
    - 미국 sPower 서부 관제센터 공격 사례
        - **원인** : Cisco Firewall 보안패치(CVE-2019-0296)를 적요하지 않은 채 1년 넘게 운영된 것 → 스위치가 공격당함
        -> 풍력발전기는 계속 돌아가는데, 풍력 발전 터빈의 상태를 알지 못함 → 셧다운
        - **대책** : Firmware Patch를 통해 해결
- **풍력발전 보안 침해 사례**
    - 인공위성에 대한 사이버 공격으로 인한 **독일 풍력 발전 시스템 11GW 마비**
        - 풍력 터빈이 직접 공격받은 것은 아님. 풍력 터빈에 사용되는 인공위성이 공격 받음
        - 피해 : 공격받은 위성망을 사용한 5,800대 풍력발전기가 영향을 받아 “autopilot” 모드로 전환 → 통신 두절, 원격 유지보수 기능 사용 불가
- **풍력 터빈 Attack Surface**
    - 물리적 공격 혹은 원격 수단을 사용해 풍력 터빈 제어 네트워크에 대한 접근 권한을 얻고자 함
    - **풍력 발전기 관련 5가지 주요 공격 수단**
        1. 풍력 발전 터빈에 대한 물리적 접근
        2. 변전소에서의 물리적 접근
        3. 공급업체 네트워크를 사용한 사이버 공격
        4. 기술자의 maintenance 장비를 통한 사이버 공격 (풍력발전 시스템의 정상 기능 떨어트림)
        5. 취약한 공급망을 통한 사이버 공격
- **풍력 터빈 공격 시나리오**
    1. 윈드 터빈 무단 제어 - Wind Shark : 검증되지 않은 프로토콜 악용해 작동상태 조작
    2. 윈드 터빈 손상 → 직접적으로 위변조된 커맨드를 날려 손상 입힘
    3. 풍력 단지 네트워크 공격

## 2. 제어 시스템 보안 특성

### 2.1. 산업 제어 시스템 보안 요구 사항 특성

- **기존 IT 시스템 보안 요구 사항 (CIA triad)**
    - **Confidentiality**
        - 정보에 대한 기밀성(비밀성) 보장
    - **Integrity**
        - 정보에 대한 위변조 감지
    - **Availability**
        - 서비스의 가용성 제공
- ⭐산업 제어 시스템의 **주요 보안 요구 사항에는 우선순위가 존재.** (A>I>C)⭐
    - ⭐**Availability(가용성)과 Integrity(무결성)은 산업제어 시스템의 정상 동작 및 신뢰성(reliability) 높은 동작을 위해 매우 중요**⭐
    - Confidentiality는 상대적으로 낮음
    - 많은 산업 제어 시스템에서는 six 9 가용성을 추구(99.9999%)
    - 높은 가용성 제공의 어려움
        - **보안성 강화시, 가용성을 동시에 제공해야 함.**

### 2.2. 산업 제어 시스템과 보안 취약성

- **보안 취약성이 있는 통신 프로토콜을 사용**
- **제어 시스템에 사용되는 OS의 보안 취약성**
    - 제어 시스템에는 **보안 취약성이 있는 embedded OS와 구버전의 Windows OS를 사용하는 경우가 많음**
- **제어 시스템의 응용 소프트웨어 보안 취약성**
    - 제어 시스템 상에서의 응용 소프트웨어는 **성능 및 기능 위주로 개발되는 경우가 맣으므로 보안 취약성이 많음** (버그 많다) ← 다양한 공격 가능
- 공격이 용이한 제어 시스템 펌웨어
    - Firmware에 virus 혹은 worm을 심는 공격은 용이 (업데이트 힘들다)
- Web service와 연결되는 제어 시스템
    - 운용 및 관리를 위래 web 인터페이스 혹은 web server를 구현함 → 웹 보안 취약성
- 기본 OS 혹은 제어 프로그램 상에서 부족한 Access Control 기능
    - 실제 현장에서 누가 접근할 것인가라는 접근 제어 개념 X
- ⭐**Ethernet-to-serial 연결이 많이 사용**⭐
    - 이더넷을 통해 명령을 주고받을 수 있음. → 장치까지 제어가 가능함. serial을 통해 보안을 제공할 수 없다.
- **불완전한 IDS**
    - 제어시스템 proprietary 프로토콜을 사용할 경우, 트래픽 감지 툴이나 시그니처 존재 X
- 방화벽 등 **네트워크 보안 기술 부족**
    - 제어 시스템 통신 프로토콜에 특화된 방화벽 기술 등이 부족한 상황 (전통 방화벽 X)

## 3. 제어 시스템 보안 기술

### 3.1. 제어 시스템 통신 프로토콜 보안 기술

- **DNP3 프로토콜 보안 취약성 연구 사례(분산 네트워크 프로토콜)**
    - DNP 제어 시스템 프로토콜에 대한 보안 취약성 연구(가용성이 가장 중요하므로 보안 X)
        - DNP 프로토콜에 비인가 **제어 명령을 전송**하여 대량의 **응답 패킷을 제어 시스템 서버로 전송, 재시작, 정지, 상태값 변경 등을 수행**함
        - 해결 방안 → 인증 기법 강화. **비정상 행위 탐지/대응 기법 존재**해야 함
- **DNP3/Modbus 프로토콜 보안 취약성 연구 사례**
    - **주요 문제점**
        - 명령어 패킷에 대한 integrity 확인 부재 → 명령어 packet을 위변조 가능
        - Master-slave 사이에 인증 매커니즘 부재 (어떤 entity도 Master 형태로 command를 전송 가능)
        - ⭐**Anti-repudiation**⭐**(부인 방지)과 anti-replay 공격에 대한 대응책 부재**
            - **부인 방지 :** 당사자가 특정 행동이나 트랜잭션을 수행한 데 대해 부인하는 것을 방지
    - **공격 유형**
        - **Unauthorized command execution** : 인증부재로 인증받지 않은 command 마구 전송 가능
        - **SCADA-DOS 공격** : 공격자는 master로 위장해 대량의 명령어 전송 가능
        - **Man-on-the-middle attack** 공격 : 공격자가 네트워크에 접근하여 MITM 공격 가능 (정상적인 두 플레이어 사이에 공격형 노드가 중간에 있음)
        - Replay 공격 : 공격자가 capture한 패킷을 사용하여 재생 공격 용이

### 3.2. 내부망 비인가 명령어 전송 탐지

- ⭐**Malware 탐지 기법 분류**⭐
    
    ![스크린샷 2023-12-17 오전 1.13.52.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_1.13.52.png)
    
    정확도 이슈 → 기존 signature 기반에서 AI 기반 이동중
    
    1. **Signature-based(전통적인 방법)**
        - 원리 : 이미 알려진 악성 코드의 "서명"이나 패턴을 기반으로 탐지한다.
    2. **Anomaly-based(비정상 동작의 behavior 파악)**
        - 정상적인 시스템 동작의 기준을 학습한 후, 이와의 차이를 감지해 악성 코드를 식별한다.
        - 알려지지 않은 악성 코드에 대해서도 감지 가능하다.
    3. **Heuristic-based**
        - 악성 코드의 특성과 패턴을 사용하여 일반적인 악성 행위를 추정하고 탐지한다.
- **Signature 기반 비인가 명령어 탐지**
    - 비정상적 명령어에 대한 해시값 등의 Signature를 체크
    - 비표준화 프로토콜에도 공격 패턴을 수집한 후에 그 패턴이 나오면 공격이라 생각함. (패턴에 대한 룰을 만든다) → 제어 시스템에서의 프로토콜에 적용 가능하다.
- AI 기반 Malware 탐지 기법 분류
    
    ![Malware 분석을 위한 머신러닝 주요 단계. (Malware Analytics: Review of Data Mining, Machine Learning and Big Data Perspectives by S. Poudyal, 2019)](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_3.02.50.png)
    
    Malware 분석을 위한 머신러닝 주요 단계. (Malware Analytics: Review of Data Mining, Machine Learning and Big Data Perspectives by S. Poudyal, 2019)
    
- Malware 분석을 위해 사용되는 주요 AI 알고리즘
    
    ![스크린샷 2023-12-17 오전 3.03.57.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_3.03.57.png)
    

## 4. 전력 분야 보안

### 4.1. 전력망 개요 : Digital Substation 구조

- **Digital substation 구조**
    
    ![Digital substation 구조의 물리적/사이버 계층 구조](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_3.05.45.png)
    
    Digital substation 구조의 물리적/사이버 계층 구조
    
    - 통신 및 제어를 위한 다양한 device 및 통신 프로토콜 존재 → 안전/신뢰가능한 접근을 위한 인증/접근제어 필요
    - 디바이스/서버 사이의 다양한 통신 프로토콜용 보안 프로토콜 필요

### 4.2. DNP3 프로토콜

- **Distributed Network Protocol 3**
    - Substation/Contro Center 간 통신 프로토콜 (IEEE-1815 표준)
    - TCP/IP 기반 DNP3 프로토콜 (TLS는 시간이 너무 느림.→ 빠른 속도 지향하므로 보안이 X)

### 4.3. IEC 61850

- **Communication network & system for power utility automation**
    - Substation 내 통신 표준
    - **IEC 61850 주요 프로토콜(잡다)**
        - **GOOSE**(Generic Object Oriented Substation Event)
        - **SV**(Sample Values)
        - **MMS**(Manufacturing Message Specification)
    - 잡다한 프로토콜을 다 사용함. 현재 시점에서 바꾸지 못함. 성능에 문제가 없다면 DTLS, TCP 사용 가능하지만, 성능 이슈가 존재.

### 4.4. 주요 암호 기술

- **Encryption(기밀성) 제공**
    - IEC 61850 message latency requirements(메시지 지연시간 요구 사항) : 해당 시간보다 더 느리면 안됨. 실시간 지연 시간을 만족시키며 빠른 대응 필요
- **Message Authentication(무결성/인증 제공)**
    - RSA, DSA 성능 이슈로 사용 불가 ← 가용성을 해치는 형태의 보안은 절대 불가능.
- **DNP SA(DNP3 Secure Authentication)**
    - DNP3에서의 보안 인증 표준
    - 2종류의 인증 기법을 제공
        - **Challenge-Response 방식** : Low-Latency가 필요 없는 경우
            - 서버가 클라이언트에게 무작위 도전(Challenge)을 보내면, 클라이언트는 사전 정의된 해싱 알고리즘을 사용하여 이에 대한 응답(Response)을 생성하여 서버에게 전송한다. 서버는 클라이언트의 응답을 확인하고 인증을 수행한다.
        - **Aggressive Authentication 방식** : Low-Latency가 필요할 때 사용
            - 클라이언트와 서버 간에 미리 공유된 비밀 키가 존재하며, 이를 사용하여 간단한 도전-응답이나 서명 기반의 인증을 빠르게 수행한다.
            - 여러 개를 보내고, 하나하나에 대해 증명할 수 있는 MAC 값을 준다. → 여러개의 정보 하나하나가 다 인증받은 정보. → challenge-response의 단점 극복.

## 5. 요약

- **산업 제어 시스템에 높은 보안성을 제공하기 위해선 다음 사항을 고려해야 함.**
    - CIA에서 가용성의 비중이 큼
    - 산업 제어 시스템의 구성 요소(프로토콜, OS, 응용 소프트웨어, 웹 서비스 등)에 많은 보안 취약점 존재
    - Proprietary 프로토콜을 많이 사용하므로 기존 보안 솔루션(IDS, Firewall 등)의 완성도는 떨어짐
- **산업 제어 보안 기술 연구**
    - 산업 제어 프로토콜 보안성 강화
    - 제어 시스템 망에 대한 IDS, IPS 연구
    - 디바이스 인증/인가 연구
    - 경량 암호 기술 연구
    - 다양한 통신 방식, OS, 동작 특성, 구성 요소에 대한 공격 방식 및 대응 기술 연구
    - AI 기반 보안성 강화 기술, 블록체인 기반의 보안성 강화 기술 필요성 대두 ← 악의적 공격 탐지가 필요

## A. 부록

### A.1. 제어 시스템상에서의 주요 보안 기술

- **Modbus 프로토콜에 대한 DPI(Deep Packet Inspection)**⭐
    - DPI: Modbus 응용 계층 레벨에서의 다양한 비인가 접근 탐지 및 차단 기술
    - 패킷 내부를 다 까보는 것

### A.2. 다양한 Attack Surface를 갖는 시스템

- **태양광 발전소의 Inverter에는 다양한 Attack Surface 존재**
    
    ![스크린샷 2023-12-17 오전 3.21.55.png](%E1%84%89%E1%85%A1%E1%84%86%E1%85%AE%E1%86%AF%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%202%2048c83ee35a1b4a93af85776729034d25/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-17_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_3.21.55.png)
    
    - Inverter는 다양한 네트워크 프로토콜 제공 → 다양한 Attack Surface 가짐

### A.3. DMZ 구간에서의 AI 기반 공격 탐지 및 분석 기술

- 방화벽과 방화벽 사이인 DMZ 공간에서 외부로 오는 패킷을 분석해 공격용인지 탐지하고 차단시킴
    - DMZ 구간을 설정해 Signature, Behavior, AI 기반 payload Anomaly Detection 기능 필요

### A.6. 5G 보안 이슈

- 5G 네트워크 → 하나의 거대한 클라우드 데이터 플랫폼.
    - 굉장히 많은 양의 데이터 전송
    - 디바이스가 수십만대 이상 연결
    - LLC에 집중 (Low Latency)
    
    → 저지연시간 채널 + 대용량 채널의 호환적 제공 필요
    
- **5G Use Case에 적합한 보안 기술 필요**
    - **eMBB 보안(Enhanced Mobile Broadband)**
        - 기존 디바이스/가입자 인증/인가, 통신망 보안 연동
    - **mIoT/mMTC(massive Machine Type Communications)**
        - 대규모 디바이스 키 관리, 식별자 연동
    - **URLLC(Ultra Reliable Low Latency Communications)**
        - 저지연, 실시간 보안 (Low Latency, Real Time Security)

---

사진 출처 : 부산대학교 정보컴퓨터공학부 김호원 교수님 (2023), 블록체인 플랫폼 연구센터